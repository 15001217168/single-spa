{"version":3,"sources":["../src/single-spa.js"],"names":[],"mappings":"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","file":"single-spa.js","sourcesContent":["let appLocationToApp = {};\nlet unhandledRouteHandlers = [];\nlet mountedApp;\nconst nativeAddEventListener = window.addEventListener;\nconst requiredLifeCycleFuncs = [\n    'scriptsWillBeLoaded',\n    'scriptsWereLoaded',\n    'applicationWillMount',\n    'applicationWasMounted',\n    'applicationWillUnmount',\n    'applicationWasUnmounted',\n    'activeApplicationSourceWillUpdate',\n    'activeApplicationSourceWillUpdate'\n];\n\nwindow.singlespa = {};\nwindow.singlespa.prependUrl = prependUrl;\nwindow.singlespa.loader = window.System; //hard dependency on JSPM being on the page\n\nfunction prependUrl(prefix, url) {\n    if (!url.startsWith('/')) {\n        //relative urls are taken care of by the <base> tag\n        return url;\n    }\n    let parsedURL = document.createElement('a');\n    parsedURL.href = url;\n    if (parsedURL.host === window.location.host && !parsedURL.pathname.startsWith(url)) {\n        return `${parsedURL.protocol}//` + `${parsedURL.hostname}:${parsedURL.port}/${prefix}/${parsedURL.pathname}${parsedURL.search}${parsedURL.hash}`.replace(/[\\/]+/g, '/');\n    } else {\n        return url;\n    }\n}\n\nexport function declareChildApplication(appLocation, activeWhen) {\n    if (typeof appLocation !== 'string' || appLocation.length === 0)\n        throw new Error(`The first argument must be a non-empty string 'appLocation'`);\n    if (typeof activeWhen !== 'function')\n        throw new Error(`The second argument must be a function 'activeWhen'`);\n    if (appLocationToApp[appLocation])\n        throw new Error(`There is already an app declared at location ${appLocation}`);\n\n    appLocationToApp[appLocation] = {\n        appLocation: appLocation,\n        activeWhen: activeWhen,\n        parentApp: mountedApp ? mountedApp.appLocation : null\n    };\n\n    triggerAppChange(true);\n}\n\nexport function addUnhandledRouteHandler(handler) {\n    if (typeof handler !== 'function') {\n        throw new Error(`The first argument must be a handler function`);\n    }\n    unhandledRouteHandlers.push(handler);\n}\n\nexport function updateApplicationSourceCode(appName) {\n    if (!appLocationToApp[appName]) {\n        throw new Error(`No such app '${appName}'`);\n    }\n    let app = appLocationToApp[appName];\n    app.lifecycleFunctions.activeApplicationSourceWillUpdate()\n    .then((resolve) => {\n        //TODO reload the app\n        resolve()\n    })\n    .then(app.lifecycleFunctions.activeApplicationSourceWasUpdated);\n}\n\nfunction callLifecycleFunction(app, funcName, ...args) {\n    return new Promise((resolve) => {\n        if (app.lifecycles.length > 0) {\n            callFunc(0);\n        } else {\n            //nothing to do\n            resolve();\n        }\n        function callFunc(i) {\n            app.lifecycles[i][funcName](...args)\n            .then(() => {\n                if (i === app.lifecycles.length - 1) {\n                    resolve();\n                } else {\n                    callFunc(++i);\n                }\n            })\n            .catch((ex) => {\n                throw ex;\n            });\n        }\n    })\n}\n\nfunction triggerAppChange(appMayNotBeMountedYet) {\n    let newApp = appForCurrentURL();\n    if (!newApp) {\n        unhandledRouteHandlers.forEach((handler) => {\n            handler(mountedApp);\n        });\n        //nothing to do. Leave the app how it was\n        if (!appMayNotBeMountedYet)\n            console.warn(`No app matches the url ${window.location.toString()}, and there are no unhandledRouteHandlers`);\n        return;\n    }\n\n    if (newApp !== mountedApp) {\n        let oldApp = mountedApp;\n\n        (oldApp ? callLifecycleFunction(oldApp, 'applicationWillUnmount') : new Promise((resolve) => resolve()))\n        .then(() => cleanupDom())\n        .then(() => finishUnmountingApp(oldApp))\n        .then(() => (oldApp ? callLifecycleFunction(oldApp, 'applicationWasUnmounted') : new Promise((resolve) => resolve())))\n        .then(() => mountedApp = newApp)\n        .then(() => (newApp.scriptsLoaded ? new Promise((resolve) => resolve()) : loadAppForFirstTime(newApp.appLocation)))\n        .then(() => updateBaseTag(newApp.publicRoot))\n        .then(() => callLifecycleFunction(newApp, 'applicationWillMount'))\n        .then(() => appWillBeMounted(newApp))\n        .then(() => insertDomFrom(newApp))\n        .then(() => callLifecycleFunction(newApp, 'applicationWasMounted'))\n        .catch((ex) => {\n            throw ex;\n        })\n    }\n}\n\nfunction updateBaseTag(newBaseHref) {\n    return new Promise((resolve) => {\n        if (document.baseURI === `${window.location.protocol}//` + `${window.location.hostname}:${window.location.port}${newBaseHref}`) {\n            debugger;\n            resolve();\n        } else {\n            newBaseHref = `/${newBaseHref}/`.replace(/[\\/]+/g, '/');\n            let baseTags = document.querySelectorAll('base');\n            for (let i=0; i<baseTags.length; i++) {\n                baseTags[i].parentNode.removeChild(baseTags[i]);\n            }\n            let newBase = document.createElement('base');\n            newBase.setAttribute('href', newBaseHref);\n            document.head.appendChild(newBase);\n            resolve();\n        }\n    });\n}\n\nfunction cleanupDom() {\n    return new Promise((resolve) => {\n        while (document.documentElement.attributes.length > 0) {\n            document.documentElement.removeAttribute(document.documentElement.attributes[0].name);\n        }\n        let numHeadElsToSkip = 0;\n        while (document.head.childNodes.length > numHeadElsToSkip) {\n            if (document.head.childNodes[numHeadElsToSkip].tagName !== 'BASE')\n                document.head.removeChild(document.head.childNodes[numHeadElsToSkip]);\n            else\n                numHeadElsToSkip++;\n        }\n        while (document.body.childNodes.length > 0) {\n            document.body.removeChild(document.body.childNodes[0]);\n        }\n        resolve();\n    })\n}\n\nfunction insertDomFrom(app) {\n    return new Promise((resolve) => {\n        const deepClone = true;\n        let clonedAppDom = app.parsedDom.cloneNode(deepClone);\n\n        for (let i=0; i<clonedAppDom.attributes.length; i++) {\n            const attr = clonedAppDom.attributes[i];\n            document.documentElement.setAttribute(attr.name, attr.value);\n        }\n\n        let appHead = app.parsedDom.querySelector('head');\n        while (appHead.childNodes.length > 0) {\n            document.head.appendChild(appHead.childNodes[0]);\n        }\n\n        let appBody = app.parsedDom.querySelector('body');\n        while (appBody.childNodes.length > 0) {\n            document.body.appendChild(appBody.childNodes[0]);\n        }\n\n        app.parsedDom = clonedAppDom;\n        resolve();\n    })\n}\n\nfunction loadAppForFirstTime(appLocation) {\n    return new Promise(function(resolve, reject) {\n        var currentAppSystemGlobal = window.System;\n        window.System = window.singlespa.loader;\n        window.singlespa.loader.import(appLocation).then(function(restOfApp) {\n            registerApplication(appLocation, restOfApp.publicRoot, restOfApp.pathToIndex, restOfApp.lifecycles);\n            let app = appLocationToApp[appLocation];\n            window.System = currentAppSystemGlobal;\n            updateBaseTag(app.publicRoot)\n            .then(() => callLifecycleFunction(app, 'scriptsWillBeLoaded'))\n            .then(() => loadIndex(app))\n            .then(() => callLifecycleFunction(app, 'scriptsWereLoaded'))\n            .then(() => resolve())\n            .catch((ex) => {\n                throw ex;\n            });;\n        })\n        .catch((ex) => {\n            throw ex;\n        })\n    })\n}\n\nfunction loadIndex(app) {\n    return new Promise((resolve) => {\n        let request = new XMLHttpRequest();\n        request.addEventListener('load', htmlLoaded);\n        request.open('GET', `${window.location.protocol}//${window.location.hostname}:${window.location.port}/${app.publicRoot}/${app.pathToIndex}`);\n        request.send();\n\n        function htmlLoaded() {\n            let parser = new DOMParser();\n            let dom = parser.parseFromString(this.responseText, 'text/html');\n            let isLoadingScript = false;\n            let scriptsToBeLoaded = [];\n\n            //for when there ain't no scripts to load, we default to all scripts being loaded\n            app.scriptsLoaded = true;\n\n            traverseNode(dom);\n            app.parsedDom = dom.documentElement;\n            if (app.scriptsLoaded) {\n                setTimeout(function() {\n                    resolve();\n                }, 10)\n            }\n\n            function traverseNode(node) {\n                for (let i=0; i<node.childNodes.length; i++) {\n                    const child = node.childNodes[i];\n                    if (child.tagName === 'SCRIPT') {\n                        scriptsToBeLoaded.push(child);\n                        appendScriptTag();\n                    }\n                    traverseNode(child);\n                }\n            }\n\n\n            function appendScriptTag() {\n                app.scriptsLoaded = false;\n                if (isLoadingScript) {\n                    return;\n                }\n                if (scriptsToBeLoaded.length === 0) {\n                    app.scriptsLoaded = true;\n                    if (app.parsedDom) {\n                        //loading a script was the last thing we were waiting on\n                        setTimeout(function() {\n                            resolve();\n                        }, 10)\n                    }\n                    return;\n                }\n                let originalScriptTag = scriptsToBeLoaded.splice(0, 1)[0];\n                //one does not simply append script tags to the dom\n                let scriptTag = document.createElement('script');\n                for (let i=0; i<originalScriptTag.attributes.length; i++) {\n                    scriptTag.setAttribute(originalScriptTag.attributes[i].nodeName, originalScriptTag.getAttribute(originalScriptTag.attributes[i].nodeName));\n                }\n                if (!scriptTag.src) {\n                    scriptTag.text = originalScriptTag.text;\n                }\n                isLoadingScript = true;\n                document.head.appendChild(scriptTag);\n                if (scriptTag.src) {\n                    scriptTag.onload = () => {\n                        isLoadingScript = false;\n                        appendScriptTag();\n                    }\n                } else {\n                    isLoadingScript = false;\n                    appendScriptTag();\n                }\n                //normally when you appendChild, the old parent no longer has the child anymore. We have to simulate that since we're not really appending the child\n                originalScriptTag.remove();\n            }\n        }\n    });\n}\n\nfunction registerApplication(appLocation, publicRoot, pathToIndex, lifecycles) {\n    //validate\n    if (typeof publicRoot !== 'string') {\n        throw new Error(`App ${appLocation} must export a publicRoot string`);\n    }\n    if (typeof pathToIndex !== 'string') {\n        throw new Error(`App ${appLocation} must export a pathToIndex string`);\n    }\n    if (typeof lifecycles !== 'object' && typeof lifecycles !== 'function') {\n        throw new Error(`App ${appLocation} must export a 'lifecycles' object or array of objects`);\n    }\n    if (!Array.isArray(lifecycles)) {\n        lifecycles = [lifecycles];\n    }\n    for (let i=0; i<lifecycles.length; i++) {\n        requiredLifeCycleFuncs.forEach((requiredLifeCycleFunc) => {\n            if (typeof lifecycles[i][requiredLifeCycleFunc] !== 'function') {\n                throw new Error(`In app '${appLocation}', The lifecycle at index ${i} does not have required function ${requiredLifeCycleFunc}`);\n            }\n        });\n    }\n\n    //register\n    let app = appLocationToApp[appLocation];\n    app.publicRoot = publicRoot;\n    app.pathToIndex = pathToIndex;\n    app.windowEventListeners = {};\n    app.lifecycles = lifecycles;\n}\n\nfunction appForCurrentURL() {\n    let appsForCurrentUrl = [];\n    for (let appName in appLocationToApp) {\n        let app = appLocationToApp[appName];\n        if (app.activeWhen(window.location)) {\n            appsForCurrentUrl.push(app);\n        }\n    }\n    switch (appsForCurrentUrl.length) {\n        case 0:\n            return undefined;\n        case 1:\n            return appsForCurrentUrl[0];\n        default:\n            appNames = appsForCurrentUrl.map((app) => app.name);\n        throw new Error(`The following applications all claim to own the location ${window.location.href} -- ${appNames.toString()}`)\n    }\n}\n\nfunction appWillBeMounted(app) {\n    return new Promise((resolve) => {\n        for (let eventName in app.windowEventListeners) {\n            for (let i=0; i<app.windowEventListeners[eventName].length; i++)\n                nativeAddEventListener(eventName, app.windowEventListeners[eventName][i]);\n        }\n        resolve();\n    })\n}\n\nfunction finishUnmountingApp(app) {\n    return new Promise((resolve) => {\n        if (app) {\n            for (let eventName in app.windowEventListeners) {\n                for (let i=0; i<app.windowEventListeners[eventName].length; i++)\n                    window.removeEventListener(eventName, app.windowEventListeners[eventName][i]);\n            }\n        }\n        resolve();\n    })\n}\n\nwindow.addEventListener = function(name, fn) {\n    if (mountedApp) {\n        if (!mountedApp.windowEventListeners[name]) {\n            mountedApp.windowEventListeners[name] = [];\n        }\n        mountedApp.windowEventListeners[name].push(fn);\n    }\n    nativeAddEventListener.apply(this, arguments);\n}\n\nfunction addEventsToAnchors() {\n    setTimeout(function() {\n        const aTags = document.querySelectorAll('a:not([singlespa])');\n        for (let i=0; i<aTags.length; i++) {\n            aTags[i].addEventListener('click', anchorClicked);\n            aTags[i].setAttribute('singlespa', '');\n        }\n        addEventsToAnchors();\n    }, 12)\n}\n\naddEventsToAnchors();\n\nfunction anchorClicked(event) {\n    if (window.location.host !== this.host || window.location.protocol !== this.protocol) {\n        //do the default thing\n        return;\n    } else {\n        event.preventDefault();\n        if (this.getAttribute('href').startsWith('#')) {\n            window.location.hash = this.getAttribute('href');\n        } else {\n            window.history.pushState(undefined, '', this.href);\n            //calling pushState programatically doesn't fire the popstate event\n            setTimeout(triggerAppChange(), 2);\n        }\n    }\n}\n"]}